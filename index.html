<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü Calendari d'Advent: Desembre üåü</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüåü%3C/text%3E%3C/svg%3E">
    <style>
        /* ==================================== */
        /* === 1. Estils Generals i Paleta === */
        /* ==================================== */

        :root {
            /* Paleta de colors nadalenca i elegant */
            --color-rojo-base: #B71C1C; /* Vermell Bordeus */
            --color-rojo-claro: #E57373;
            --color-dorado-base: #FFD700; /* Or Pur */
            --color-dorado-brillo: #FFFACD; /* Daurat Clar */
            --color-fondo: #F5F5F5; /* Fons suau */
            --color-texto-principal: #333333;
            --sombra-suave: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Georgia', serif; /* Font cl√†ssica i elegant */
            background-color: var(--color-fondo);
            color: var(--color-texto-principal);
            line-height: 1.6;
            padding: 20px;
            background-image: linear-gradient(135deg, var(--color-fondo) 0%, #ffffff 50%, var(--color-fondo) 100%);
        }

        /* =================================== */
        /* === 2. Estils de la Cap√ßalera === */
        /* =================================== */

        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(to right, var(--color-rojo-base), #D32F2F);
            color: var(--color-dorado-brillo);
            border-radius: 15px;
            box-shadow: var(--sombra-suave);
            border: 2px solid var(--color-dorado-base);
        }

        .header h1 {
            font-family: 'Brush Script MT', cursive;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-style: italic;
            margin-top: 5px;
            font-size: 1.1em;
        }

        /* Estils del Panell de Test */
        .test-panel {
            max-width: 1200px;
            margin: 0 auto 20px;
            padding: 15px;
            background-color: #ffe082; /* Groc suau de test */
            border-radius: 8px;
            border: 1px solid var(--color-dorado-base);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .test-panel label {
            font-weight: bold;
            color: var(--color-rojo-base);
        }

        .test-panel input[type="number"] {
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid var(--color-rojo-base);
            width: 80px;
            text-align: center;
        }

        /* ========================================= */
        /* === 3. Estils de la Quadr√≠cula (Dies) === */
        /* ========================================= */

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .day {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 120px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: var(--sombra-suave);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .day-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .day-label {
            font-size: 0.8em;
            text-transform: uppercase;
        }

        /* D√≠as Desbloqueados (Passats i Actual) */
        .day.unlocked {
            background: linear-gradient(145deg, var(--color-rojo-base), var(--color-rojo-claro));
            color: var(--color-dorado-brillo);
            border: 3px solid var(--color-dorado-base);
            box-shadow: 0 0 10px var(--color-dorado-base), 0 0 20px var(--color-rojo-claro);
            cursor: pointer; /* Assegura el cursor de clic */
        }

        .day.unlocked:hover {
            transform: scale(1.05) rotate(-1deg);
            background: linear-gradient(145deg, #CC0000, #F44336);
            box-shadow: 0 0 15px var(--color-dorado-base), 0 0 30px var(--color-dorado-base);
        }

        /* Dia Actual - Ressenyat Especial */
        .day.today {
            background: var(--color-dorado-base);
            color: var(--color-rojo-base);
            border: 4px solid var(--color-rojo-base);
            animation: pulse-gold 2s infinite alternate;
        }

        .day.today:hover {
            transform: scale(1.08) rotate(1deg);
        }

        /* D√≠as Bloqueados (Futurs) */
        .day.locked {
            background-color: #AAAAAA;
            color: #E0E0E0;
            cursor: not-allowed;
            opacity: 0.6;
            position: relative;
            overflow: hidden;
            pointer-events: none;
        }

        .day.locked::before {
            content: 'üîí'; /* Icona de cadenat */
            font-size: 3em;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #424242;
            z-index: 2;
        }
        
        .day.locked .day-number, .day.locked .day-label {
            visibility: hidden;
        }

        /* Animaci√≥ subtil de brillantor daurat */
        @keyframes pulse-gold {
            0% { box-shadow: 0 0 8px var(--color-dorado-base), 0 0 12px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 0 12px var(--color-dorado-base), 0 0 20px var(--color-dorado-base); }
        }

        /* =================================== */
        /* === 4. Estils del Modal (Pop-up) === */
        /* =================================== */

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: #ffffff;
            color: var(--color-texto-principal);
            padding: 20px;
            border-radius: 15px;
            max-width: 95vw;      /* l√≠mite horizontal */
            max-height: 95vh;     /* l√≠mite vertical */
            width: auto;          /* que se adapte al contenido */
            overflow: auto;       /* scroll si se pasa del alto */
            position: relative;
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.3s ease-out;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 5px solid var(--color-rojo-base);
            display: inline-block; /* que ‚Äúabrace‚Äù el contenido */
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--color-rojo-base);
            padding-bottom: 10px;
        }

        .modal-header h2 {
            color: var(--color-rojo-base);
            font-size: 1.8em;
        }

        .close-button {
            background: var(--color-dorado-base);
            color: var(--color-rojo-base);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1.2em;
            line-height: 1;
            cursor: pointer;
            transition: background 0.2s;
            font-weight: bold;
        }

        .close-button:hover {
            background: var(--color-rojo-claro);
            color: var(--color-dorado-brillo);
        }

        .modal-image {
            display: block;
            max-width: 100%;   /* no superar el ancho del modal */
            max-height: 70vh;  /* no superar el alto de la pantalla */
            width: auto;       /* respetar proporciones */
            height: auto;      /* respetar proporciones */
            border-radius: 10px;
            margin: 0 auto 15px;
            border: 3px solid var(--color-dorado-base);
            object-fit: contain; /* encajar la imagen dentro sin recortar */
        }


        .modal-message {
            font-size: 1.2em;
            font-style: italic;
            text-align: center;
            padding: 10px;
            background-color: var(--color-dorado-brillo);
            border-radius: 8px;
            color: var(--color-rojo-base);
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
        }

        /* ============================== */
        /* === 5. Media Queries (RWD) === */
        /* ============================== */

        @media (min-width: 768px) {
            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                gap: 20px;
            }

            .day {
                height: 150px;
            }

            .header h1 {
                font-size: 3.5em;
            }

            .modal-content {
                max-width: 600px;
            }
        }

        @media (max-width: 500px) {
            .calendar-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }

        @keyframes celebration-shake {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.02) rotate(0.5deg); }
            50% { transform: scale(1.04) rotate(-0.5deg); }
            75% { transform: scale(1.02) rotate(0.5deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .modal-content.celebrating {
            animation: celebration-shake 0.6s ease-in-out infinite;
        }

    </style>
</head>
<body>

    <header class="header">
        <h1>El Meu Calendari d'Advent ‚ù§Ô∏è</h1>
        <p>Una sorpresa especial t'espera cada dia de desembre.</p>
    </header>

    
    <main class="calendar-grid" id="calendarGrid">
        </main>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle"></h2>
                <button class="close-button" id="closeModalButton">&times;</button>
            </div>
            <img src="" alt="Foto del dia" class="modal-image" id="modalImage">
            <p class="modal-message" id="modalMessage"></p>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        /* =========================================== */
        /* === ESTRUCTURA DE CONTINGUT PERSONALITZABLE (CATAL√Ä) === */
        /* =========================================== */

        /**
         * üí° INSTRUCCIONS DE PERSONALITZACI√ì:
         * * 1. üìÇ ESTRUCTURA DE CARPETES RECOMENDADA EN GITHUB:
         * - Crea una carpeta anomenada `images` a l'arrel del teu repositori.
         * - Puja les teves 31 fotos (anomenades, per exemple: `photo1.jpg`, `photo2.jpg`, etc.) a aquesta carpeta.
         * * 2. üì∏ ACTUALITZAR RUTES D'IMATGE (IMATGES_DIARIES):
         * - Reempla√ßa les rutes placeholder amb les rutes reals de les teves 31 fotos.
         * - Assegura't que l'ordre (√≠ndex 0 = Dia 1, √≠ndex 30 = Dia 31) sigui correcte.
         * * 3. üìù EDITAR FRASES (FRASES_DIARIES):
         * - Reempla√ßa les frases d'exemple amb els teus 31 missatges especials i rom√†ntics.
         */

        const IMATGES_DIARIES = [
            'images/IMG_1.webp',   // Dia 1
            'images/photo2.jpg',   // Dia 2
            'images/photo3.jpg',   // Dia 3
            'images/photo4.jpg',   // Dia 4
            'images/photo5.jpg',   // Dia 5
            'images/photo6.jpg',   // Dia 6
            'images/photo7.jpg',   // Dia 7
            'images/photo8.jpg',   // Dia 8
            'images/photo9.jpg',   // Dia 9
            'images/photo10.jpg',  // Dia 10
            'images/photo11.jpg',  // Dia 11
            'images/photo12.jpg',  // Dia 12
            'images/photo13.jpg',  // Dia 13
            'images/photo14.jpg',  // Dia 14
            'images/photo15.jpg',  // Dia 15
            'images/photo16.jpg',  // Dia 16
            'images/photo17.jpg',  // Dia 17
            'images/photo18.jpg',  // Dia 18
            'images/photo19.jpg',  // Dia 19
            'images/photo20.jpg',  // Dia 20
            'images/photo21.jpg',  // Dia 21
            'images/photo22.jpg',  // Dia 22
            'images/photo23.jpg',  // Dia 23
            'images/photo24.jpg',  // Dia 24 - Nit de Nadal
            'images/photo25.jpg',  // Dia 25 - Nadal
            'images/photo26.jpg',  // Dia 26
            'images/photo27.jpg',  // Dia 27
            'images/photo28.jpg',  // Dia 28
            'images/photo29.jpg',  // Dia 29
            'images/photo30.jpg',  // Dia 30
            'images/photo31.jpg'   // Dia 31 - Cap d'Any
        ];

        // 31 frases d'exemple rom√†ntiques i nadalenques en catal√†
        const FRASES_DIARIES = [
            'Dia 1: La primera foto que tenim junts‚Ä¶ aquell instant on tot va comen√ßar ‚ù§Ô∏èüì∏',
            'Dia 2: Desitjant que la m√†gia duri tot l\'any. Amb tu, des del primer dia √©s possible ‚ú®‚ù§Ô∏è',
            'Dia 3: La primera vegada que vas con√®ixer la Urpa üòçüê∂',
            'Dia 4: Recordant la primera vegada que et vas adormir amb mi. Que mona ets!! üò¥üíû',
            'Dia 5: Avui fem 9 mesos. Espero que en siguin molts m√©s ‚ù§Ô∏èüéâ',
            'Dia 6: No hi ha fred que m\'afecti si tinc les teves abra√ßades. T\'adoro! ü§ó‚ùÑÔ∏è',
            'Dia 7: Ets la meva petita gran aventura. üåç‚ù§Ô∏è',
            'Dia 8: Aquesta foto defineix la nostra relaci√≥. üòÇüíñ',
            'Dia 9: El nostre primer viatge a Roda va ser especial ü•∞üåÖ',
            'Dia 10: Deu raons per estimar-te... i em falten 365 dies l\'any. ‚ù§Ô∏èüìÖ',
            'Dia 11: Que bonic va ser veure Andorra amb tu ‚õ∞‚ù§Ô∏è',
            'Dia 12: Que l\'alegria d\'aquest mes ens uneixi encara m√©s, vida meva. ‚ú®üíû',
            'Dia 13: Visca el Bar√ßa, visca Catalunya i visca tu. üîµüî¥‚ù§Ô∏è',
            'Dia 14: Desembre √©s un mes, per√≤ tu ets el que m√©s m\'agrada ‚ùÑÔ∏è‚ù§Ô∏è',
            'Dia 15: Meitat de mes, meitat de cam√≠. No puc esperar a veure qu√® vindr√†. üóìÔ∏èüí´',
            'Dia 16: Moltes felicitats, amor meu. No tens ni idea de l\'amor i l\'alegria que portes a la meva vida. Des del primer dia, has il¬∑luminat el meu m√≥n d\'una manera que mai hauria pensat possible. Ets la persona m√©s meravellosa, intel¬∑ligent i divertida que conec, i cada moment al teu costat √©s un tresor. T\'estimo profundament i per sempre. T\'estimo m√©s del que podria haver-me imaginat mai. üéÇ‚ù§Ô∏è',
            'Dia 17: Gr√†cies per cada rialla, cada mirada, cada petit detall. üòäüíõ',
            'Dia 18: Que segueixis fent-me riure i omplint-me de calidesa i amor. üòÇüî•üíñ',
            'Dia 19: El viatge m√©s bonic que he fet mai: l‚ÄôAlgarve i tu üòçüåä',
            'Dia 20: Si jo estic b√© √©s perqu√® tu est√†s b√©. üíû‚ú®',
            'Dia 21: Per seguir fent plans especials tota la vida amb tu. üìç‚ù§Ô∏è',
            'Dia 22: Dos dies per a la Nit de Nadal. L\'emoci√≥ creix, com el meu amor per tu. üéÑüíì',
            'Dia 23: Sempre hi ha m√†gia al teu somriure. √âs incre√Øble com ho il¬∑lumines tot. ‚ú®üòä',
            'Dia 24: Nit de Nadal! Ets la meva tradici√≥ favorita i el meu regal etern. üéÑüéÅ‚ù§Ô∏è',
            'Dia 25: Bon Nadal! Obrir regals √©s divertit, per√≤ despertar al teu costat √©s la veritable felicitat. üéÅ‚ú®üíñ',
            'Dia 26: El teu somriure √©s el meu millor regal de Nadal, amor meu. üòäüéÑüíû',
            'Dia 27: El temps s\'atura quan estem junts. √âs el meu moment preferit del dia. ‚è≥‚ù§Ô∏è',
            'Dia 28: Recordant tots els moments divertits i bojos que hem compartit. üòÇüí´',
            'Dia 29: Pensant en tot el que hem aconseguit i tot el que ens queda per fer. üß†üíõ',
            'Dia 30: Un any incre√Øble que s\'acaba. Ets la meva companya de vida i la meva millor amiga. ‚ù§Ô∏èüåü',
            'Dia 31: Feli√ß Cap d\'Any! Brindo per un nou any ple d\'amor, somnis i tu. T\'estimo. ü•ÇüéÜ‚ù§Ô∏è'
        ];




        /* ================================== */
        /* === L√íGICA DEL CALENDARI (JS) === */
        /* ================================== */

        document.addEventListener('DOMContentLoaded', () => {
            renderCalendar();
            
            // Afegir l'escoltador d'esdeveniments per a l'entrada de test
            document.getElementById('testDay').addEventListener('input', renderCalendar);
        });

        const calendarGrid = document.getElementById('calendarGrid');
        const modalOverlay = document.getElementById('modalOverlay');
        const closeModalButton = document.getElementById('closeModalButton');
        const modalTitle = document.getElementById('modalTitle');
        const modalImage = document.getElementById('modalImage');
        const modalMessage = document.getElementById('modalMessage');

        /**
         * Obt√© el dia actual, amb la possibilitat de sobrescriure'l amb el panell de test.
         */
        function getCurrentDay() {
            // **INICI DE LA FUNCI√ì DE TEST**
            // Llegeix el valor del camp de test
            const testDayInput = document.getElementById('testDay');
            
            // Si el camp de test existeix i t√© un valor v√†lid, utilitza aquest valor
            if (testDayInput && testDayInput.value >= 1 && testDayInput.value <= 31) {
                return parseInt(testDayInput.value);
            }
            // **FINAL DE LA FUNCI√ì DE TEST (Aquesta part s'ha d'eliminar/comentar per al llan√ßament final)**
            
            // Utilitza la data real del sistema (sense el panell de test)
            const now = new Date();
            const currentMonth = now.getMonth(); 
            
            // Nom√©s funcionar√† correctament si √©s desembre (mes 11)
            if (currentMonth === 11) {
                return now.getDate();
            }
            // Si no √©s desembre, retornem 0 per bloquejar-ho tot (excepte si fem test)
            return 0; 
        }

        /**
         * Genera i renderitza els 31 dies del calendari.
         * Aquesta funci√≥ es crida en carregar i al canviar el dia de test.
         */
        function renderCalendar() {
            // Netejar la quadr√≠cula abans de tornar a renderitzar (necessari per a la funci√≥ de test)
            calendarGrid.innerHTML = ''; 

            const currentDay = getCurrentDay();
            const isDecember = currentDay > 0; // Si currentDay √©s > 0, estem a desembre o simulant desembre

            // El calendari va de l'1 al 31
            for (let day = 1; day <= 31; day++) {
                const dayElement = document.createElement('div');
                dayElement.classList.add('day');
                dayElement.dataset.day = day;

                let isLocked = true;
                
                // L√≤gica de desbloqueig: desbloquejat si el dia √©s menor o igual al dia actual (real o de test)
                if (day <= currentDay) {
                    isLocked = false;
                    dayElement.classList.add('unlocked');
                    
                    if (day === currentDay) {
                         dayElement.classList.add('today'); // Dia actual ressaltat
                    }
                } else {
                    dayElement.classList.add('locked'); // Dia futur bloquejat
                }
                
                // Assignar el gestor d'esdeveniments nom√©s als dies desbloquejats
                if (!isLocked) {
                     dayElement.addEventListener('click', () => openDayContent(day));
                }


                dayElement.innerHTML = `
                    <span class="day-number">${day}</span>
                    <span class="day-label">Desembre</span>
                `;

                calendarGrid.appendChild(dayElement);
            }
        }

        /**
         * Mostra el modal amb la foto i frase del dia seleccionat.
         * @param {number} day - El n√∫mero del dia (1 a 31).
         */
        function openDayContent(day) {
            const contentIndex = day - 1; 

            modalTitle.textContent = `Dia ${day}`;
            modalMessage.textContent = FRASES_DIARIES[contentIndex];

            if (day === 16 || day === 5) {
                modalOverlay.querySelector('.modal-content')
                    .classList.add('celebrating');
            
                lanzarCelebracion();
            
                setTimeout(() => {
                    modalOverlay.querySelector('.modal-content')
                        .classList.remove('celebrating');
                }, 12000);
            }

            if (day === 25 || day == 6) {
                modalOverlay.querySelector('.modal-content').classList.add('celebrating');
                lanzarNavidad();
                setTimeout(() => {
                    modalOverlay.querySelector('.modal-content').classList.remove('celebrating');
                }, 12000);
            }

            if (day === 31 || day == 7) {
                modalOverlay.querySelector('.modal-content').classList.add('celebrating');
                lanzarAnyNou();
                setTimeout(() => {
                    modalOverlay.querySelector('.modal-content').classList.remove('celebrating');
                }, 12000);
            }



            // Todas las combinaciones posibles
            const candidates = [
                `images/IMG-${day}.jpg`,
                `images/IMG_${day}.jpg`,
                `images/IMG-${day}.webp`,
                `images/IMG_${day}.webp`
            ];

            let index = 0;

            // Funci√≥n recursiva para ir probando una a una
            function tryNext() {
                if (index >= candidates.length) {
                    modalImage.src = ""; 
                    console.warn("‚ö† No s'ha trobat cap imatge per al dia", day);
                    return;
                }

                const src = candidates[index];
                index++;

                // Intentar cargar la imagen
                modalImage.onerror = tryNext;
                modalImage.src = src;
            }

            tryNext(); // iniciar comprobaci√≥n

            modalOverlay.style.display = 'flex';
            setTimeout(() => {
                modalOverlay.classList.add('active');
            }, 10);
        }



        /**
         * Retorna la ruta correcta de la imatge del dia:
         * IMG-X.jpg si existeix, sin√≥ IMG-X.webp
         */
        async function getImageForDay(day) {
            const jpg = `images/IMG-${day}.jpg`;
            const webp = `images/IMG-${day}.webp`;

            try {
                const res = await fetch(jpg, { method: 'HEAD' });
                if (res.ok) return jpg;
                return webp;
            } catch {
                return webp;
            }
        }



        /**
         * Tanca el modal.
         */
        function closeDayContent() {
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.style.display = 'none';
            }, 300);
        }

        function lanzarCelebracion() {
            const duration = 20000; // 20 segundos
            const end = Date.now() + duration;
        
            const colors = [
                '#FFD700', // dorado
                '#B71C1C', // rojo oscuro
                '#E57373', // rojo claro
                '#FFFFFF', // blanco
                '#FF4081'  // rosa
            ];
        
            const scalarBig = 1.6; // tama√±o grande de part√≠culas
        
            /* ========================= */
            /* === MEGA EXPLOSI√ìN === */
            /* ========================= */
            confetti({
                particleCount: 500,
                spread: 360,
                startVelocity: 65,
                gravity: 0.8,
                scalar: scalarBig,
                colors,
                origin: { x: 0.5, y: 0.6 }
            });
        
            /* ========================= */
            /* === LLUVIA CONSTANTE === */
            /* ========================= */
            (function rain() {
                confetti({
                    particleCount: 35,
                    angle: 90,
                    spread: 140,
                    startVelocity: 30,
                    gravity: 1.3,
                    ticks: 180,
                    scalar: scalarBig,
                    colors,
                    origin: { x: Math.random(), y: -0.25 }
                });
        
                if (Date.now() < end) {
                    requestAnimationFrame(rain);
                }
            })();
        
            /* ================================ */
            /* === CA√ëONES LATERALES DOBLES === */
            /* ================================ */
            const sideCannons = setInterval(() => {
                confetti({
                    particleCount: 150,
                    angle: 55,
                    spread: 70,
                    startVelocity: 55,
                    gravity: 1,
                    scalar: scalarBig,
                    colors,
                    origin: { x: 0 }
                });
        
                confetti({
                    particleCount: 150,
                    angle: 125,
                    spread: 70,
                    startVelocity: 55,
                    gravity: 1,
                    scalar: scalarBig,
                    colors,
                    origin: { x: 1 }
                });
            }, 900);
        
            /* ================================= */
            /* === EXPLOSIONES ALEATORIAS === */
            /* ================================= */
            const randomBursts = setInterval(() => {
                confetti({
                    particleCount: 200,
                    spread: 360,
                    startVelocity: 50,
                    gravity: 0.9,
                    scalar: scalarBig,
                    colors,
                    origin: {
                        x: Math.random(),
                        y: Math.random() * 0.6
                    }
                });
            }, 2000);
        
            /* === STOP === */
            setTimeout(() => {
                clearInterval(sideCannons);
                clearInterval(randomBursts);
            }, duration);
        }


        function lanzarNavidad() {
            const duration = 20000;
            const end = Date.now() + duration;
        
            const snowColors = ['#FFFFFF', '#F5F5F5'];
            const goldColors = ['#FFD700', '#FFFACD'];
            const loveColors = ['#FF4081', '#E57373'];
        
            const big = 2.2; // tama√±o GRANDE
        
            /* ‚ùÑÔ∏è NIEVE GRANDE Y LENTA */
            (function snow() {
                confetti({
                    particleCount: 20,
                    startVelocity: 50,
                    gravity: 0.25,
                    ticks: 400,
                    scalar: big,
                    colors: snowColors,
                    shapes: ['circle'],
                    origin: { x: Math.random(), y: -0.2 }
                });
        
                if (Date.now() < end) requestAnimationFrame(snow);
            })();
        
            /* ‚≠ê ESTRELLAS DORADAS */
            const stars = setInterval(() => {
                confetti({
                    particleCount: 25,
                    spread: 360,
                    startVelocity: 20,
                    gravity: 0.9,
                    scalar: big,
                    colors: goldColors,
                    shapes: ['star'],
                    origin: {
                        x: Math.random(),
                        y: Math.random() * 0.4
                    }
                });
            }, 1400);
        
            /* üéÅ REGALOS (cuadrados grandes) */
            const gifts = setInterval(() => {
                confetti({
                    particleCount: 30,
                    angle: 90,
                    spread: 100,
                    startVelocity: 25,
                    gravity: 1.4,
                    scalar: big,
                    colors: ['#B71C1C', '#FFD700', '#FFFFFF'],
                    shapes: ['square'],
                    origin: { x: Math.random(), y: -0.2 }
                });
            }, 1600);
        
            /* ‚ù§Ô∏è CORAZONES GRANDES */
            const hearts = setInterval(() => {
                confetti({
                    particleCount: 25,
                    spread: 80,
                    startVelocity: 20,
                    gravity: 0.6,
                    scalar: big,
                    colors: loveColors,
                    shapes: ['heart'],
                    origin: {
                        x: Math.random(),
                        y: Math.random() * 0.3
                    }
                });
            }, 2000);
        
            setTimeout(() => {
                clearInterval(stars);
                clearInterval(gifts);
                clearInterval(hearts);
            }, duration);
        }


        function lanzarAnyNou() {
            const duration = 22000;
            const end = Date.now() + duration;
        
            const colors = [
                '#FFD700',
                '#FF4081',
                '#FFFFFF',
                '#00E5FF',
                '#B71C1C'
            ];
        
            const big = 2.3;
        
            function megaFirework() {
                confetti({
                    particleCount: 300,
                    spread: 360,
                    startVelocity: 70,
                    gravity: 0.9,
                    scalar: big,
                    colors,
                    origin: {
                        x: Math.random(),
                        y: Math.random() * 0.5
                    }
                });
            }
        
            megaFirework();
        
            const fireworks = setInterval(megaFirework, 1100);
        
            /* üéä CA√ëONES CONTINUOS */
            const cannons = setInterval(() => {
                confetti({
                    particleCount: 200,
                    angle: 60,
                    spread: 80,
                    startVelocity: 55,
                    scalar: big,
                    colors,
                    origin: { x: 0 }
                });
        
                confetti({
                    particleCount: 200,
                    angle: 120,
                    spread: 80,
                    startVelocity: 55,
                    scalar: big,
                    colors,
                    origin: { x: 1 }
                });
            }, 1500);
        
            /* ‚ù§Ô∏è + ‚≠ê EXTRA */
            const extras = setInterval(() => {
                confetti({
                    particleCount: 100,
                    spread: 360,
                    startVelocity: 35,
                    scalar: big,
                    shapes: ['heart', 'star'],
                    colors,
                    origin: {
                        x: Math.random(),
                        y: Math.random() * 0.4
                    }
                });
            }, 2000);
        
            setTimeout(() => {
                clearInterval(fireworks);
                clearInterval(cannons);
                clearInterval(extras);
            }, duration);
        }



        // Assignar esdeveniments per tancar el modal
        closeModalButton.addEventListener('click', closeDayContent);
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                closeDayContent();
            }
        });
    </script>
</body>
</html>
